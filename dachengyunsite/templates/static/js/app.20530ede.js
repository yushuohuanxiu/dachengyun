(function(e){function t(t){for(var n,i,l=t[0],s=t[1],d=t[2],f=0,c=[];f<l.length;f++)i=l[f],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&c.push(o[i][0]),o[i]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);u&&u(t);while(c.length)c.shift()();return a.push.apply(a,d||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,l=1;l<r.length;l++){var s=r[l];0!==o[s]&&(n=!1)}n&&(a.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},o={app:0},a=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var u=s;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("b-navbar",{attrs:{toggleable:"lg",type:"dark",variant:"info"}},[r("b-navbar-brand",[e._v("dachengyun Setting Page")])],1),r("b-container",{staticStyle:{"padding-top":"30px","padding-left":"30px","padding-right":"30px"},attrs:{fluid:""}},[r("b-row",[r("b-col",[r("b-card",{attrs:{"header-tag":"header"},scopedSlots:e._u([{key:"header",fn:function(){return[r("p",{staticClass:"h4"},[e._v(" 同步文件夹列表 "),r("b-icon",{staticStyle:{float:"right"},attrs:{icon:"folder-plus","font-scale":"1.4"},on:{click:function(t){return e.$bvModal.show("modal-folderAdd")}}})],1)]},proxy:!0}])},[r("b-table",{staticStyle:{"margin-bottom":"0px"},attrs:{items:e.folderItems,fields:e.folderFields,"head-variant":"dark",stacked:"md",hover:"",striped:"",bordered:""},scopedSlots:e._u([{key:"cell(userCount)",fn:function(t){return[e._v(" "+e._s(t.item.userCount)+" "),r("b-icon",{staticStyle:{float:"right","padding-top":"5px"},attrs:{icon:"trash","font-scale":"1.4"},on:{click:function(r){return r.stopPropagation(),e.onFolderDelete(t.item)}}})]}}])})],1)],1),r("b-col",{attrs:{cols:"4"}},[r("b-card",{attrs:{"header-tag":"header"},scopedSlots:e._u([{key:"header",fn:function(){return[r("p",{staticClass:"h4"},[e._v(" 用户列表 "),r("b-icon",{staticStyle:{float:"right"},attrs:{icon:"person-plus","font-scale":"1.4"},on:{click:function(t){return e.$bvModal.show("modal-userAdd")}}})],1)]},proxy:!0}])},[r("b-table",{staticStyle:{"margin-bottom":"0px"},attrs:{items:e.userItems,fields:e.userFields,"head-variant":"dark",stacked:"md",hover:"",striped:"",bordered:""},scopedSlots:e._u([{key:"cell(clientCount)",fn:function(t){return[e._v(" "+e._s(t.item.clientCount)+" "),r("b-icon",{staticStyle:{float:"right","padding-top":"5px"},attrs:{icon:"trash","font-scale":"1.4"},on:{click:function(r){return r.stopPropagation(),e.onUserDelete(t.item)}}}),r("b-icon",{staticStyle:{float:"right","padding-top":"5px"},attrs:{icon:"arrow-repeat","font-scale":"1.4"},on:{click:function(r){return r.stopPropagation(),e.onUserPasswordRefresh(t.item)}}})]}}])})],1)],1),r("b-col",{attrs:{cols:"5"}},[r("b-card",{attrs:{"header-tag":"header"},scopedSlots:e._u([{key:"header",fn:function(){return[r("p",{staticClass:"h4"},[e._v(" 权限列表 "),r("b-icon",{staticStyle:{float:"right"},attrs:{icon:"file-plus","font-scale":"1.4"},on:{click:function(t){return e.$bvModal.show("modal-privilegeAdd")}}})],1)]},proxy:!0}])},[r("b-table",{staticStyle:{"margin-bottom":"0px"},attrs:{items:e.privilegeItems,fields:e.privilegeFields,"head-variant":"dark",stacked:"md",hover:"",striped:"",bordered:""},scopedSlots:e._u([{key:"cell(privilege)",fn:function(t){return[e._v(" "+e._s(e.privilegeFormat(t.item))+" "),r("b-icon",{staticStyle:{float:"right","padding-top":"5px"},attrs:{icon:"trash","font-scale":"1.4"},on:{click:function(r){return r.stopPropagation(),e.onPrivilegeDelete(t.item)}}})]}}])})],1)],1)],1)],1),r("b-modal",{attrs:{id:"modal-userAdd",title:"添加用户"},on:{hidden:function(t){return e.resetModal("user")},ok:e.userAdd}},[r("b-form",{ref:"userAdd",attrs:{validated:""}},[r("b-form-group",{attrs:{label:"用户名：","invalid-feedback":"请输入最小3位字母或数字组合的用户名信息"}},[r("b-form-input",{attrs:{placeholder:"请输入用户名",required:"",pattern:"[A-Za-z0-9]{3,30}"},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}})],1)],1)],1),r("b-modal",{attrs:{id:"modal-folderAdd",title:"添加共享文件夹"},on:{hidden:function(t){return e.resetModal("folder")},ok:e.folderAdd}},[r("b-form",{ref:"folderAdd",attrs:{validated:""}},[r("b-form-group",{attrs:{label:"文件夹名：","invalid-feedback":"请输入最小2位汉字、字母或数字组合的同步文件夹名信息"}},[r("b-form-input",{attrs:{placeholder:"请输入同步文件夹名",required:"",pattern:"[A-Za-z0-9\\u4e00-\\u9fa5]{2,30}"},model:{value:e.folder.foldername,callback:function(t){e.$set(e.folder,"foldername",t)},expression:"folder.foldername"}})],1)],1)],1),r("b-modal",{attrs:{id:"modal-privilegeAdd",title:"添加权限"},on:{hidden:function(t){return e.resetModal("privilege")},ok:e.privilegeAdd}},[r("b-form",{ref:"privilegeAdd",attrs:{validated:""}},[r("b-form-group",{attrs:{label:"文件夹名：","invalid-feedback":"请选择同步文件夹"}},[r("b-form-select",{staticClass:"mb-3",attrs:{options:e.folderItems,"value-field":"foldername","text-field":"foldername",required:""},scopedSlots:e._u([{key:"first",fn:function(){return[r("b-form-select-option",{attrs:{value:null,disabled:""}},[e._v("-- 请选择同步文件夹 --")])]},proxy:!0}]),model:{value:e.privilege.foldername,callback:function(t){e.$set(e.privilege,"foldername",t)},expression:"privilege.foldername"}})],1),r("b-form-group",{attrs:{label:"用户名：","invalid-feedback":"请选择用户"}},[r("b-form-select",{staticClass:"mb-3",attrs:{options:e.userItems,"value-field":"username","text-field":"username",required:""},scopedSlots:e._u([{key:"first",fn:function(){return[r("b-form-select-option",{attrs:{value:null,disabled:""}},[e._v("-- 请选择用户 --")])]},proxy:!0}]),model:{value:e.privilege.username,callback:function(t){e.$set(e.privilege,"username",t)},expression:"privilege.username"}})],1),r("b-form-group",{attrs:{label:"权限：","invalid-feedback":"请选择权限"}},[r("b-form-select",{staticClass:"mb-3",attrs:{required:""},model:{value:e.privilege.privilege,callback:function(t){e.$set(e.privilege,"privilege",t)},expression:"privilege.privilege"}},[r("b-form-select-option",{attrs:{value:null,disabled:""}},[e._v("-- 请选择权限 --")]),r("b-form-select-option",{attrs:{value:"3"}},[e._v("读取")]),r("b-form-select-option",{attrs:{value:"2"}},[e._v("读取、修改")]),r("b-form-select-option",{attrs:{value:"1"}},[e._v("读取、修改、新建")]),r("b-form-select-option",{attrs:{value:"0"}},[e._v("读取、修改、新建、删除")])],1)],1)],1)],1)],1)},a=[],i={data:function(){return{userFields:[{key:"username",label:"用户名",sortable:!0},{key:"password",label:"密码"},{key:"clientCount",label:"终端数"}],userItems:[],folderFields:[{key:"foldername",label:"文件夹名",sortable:!0},{key:"userCount",label:"用户数"}],folderItems:[],privilegeFields:[{key:"foldername",label:"文件夹名",sortable:!0},{key:"username",label:"用户名",sortable:!0},{key:"privilege",label:"权限"}],privilegeItems:[],user:{username:null},folder:{foldername:null},privilege:{foldername:null,username:null,privilege:null}}},mounted:function(){this.$reflush()},methods:{onUserDelete:function(e){var t=this;this.$bvModal.msgBoxConfirm("是否要删除用户["+e.username+"]?",{title:"删除确认",buttonSize:"sm",okVariant:"danger",okTitle:"删除",cancelTitle:"取消",headerClass:"p-2 border-bottom-0",footerClass:"p-2 border-top-0"}).then((function(r){r&&t.$http.post("http://127.0.0.1:8000/manage/userDel/",JSON.stringify({username:e.username})).then((function(e){t.$reflush()}))}))},onUserPasswordRefresh:function(e){var t=this;this.$http.post("http://127.0.0.1:8000/manage/userPasswordRefresh/",JSON.stringify({username:e.username})).then((function(e){t.$reflush()}))},onFolderDelete:function(e){var t=this;this.$bvModal.msgBoxConfirm("是否要删除文件夹["+e.foldername+"]?",{title:"删除确认",buttonSize:"sm",okVariant:"danger",okTitle:"删除",cancelTitle:"取消",headerClass:"p-2 border-bottom-0",footerClass:"p-2 border-top-0"}).then((function(r){r&&t.$http.post("http://127.0.0.1:8000/manage/syncFolerDel/",JSON.stringify({foldername:e.foldername})).then((function(e){t.$reflush()}))}))},onPrivilegeDelete:function(e){var t=this;this.$bvModal.msgBoxConfirm("是否要删除权限["+e.foldername+"-"+e.username+"]?",{title:"删除确认",buttonSize:"sm",okVariant:"danger",okTitle:"删除",cancelTitle:"取消",headerClass:"p-2 border-bottom-0",footerClass:"p-2 border-top-0"}).then((function(r){r&&t.$http.post("http://127.0.0.1:8000/manage/userPrivilegeDel/",JSON.stringify({username:e.username,foldername:e.foldername})).then((function(e){t.$reflush()}))}))},$reflush:function(){var e=this;this.$http.post("http://127.0.0.1:8000/manage/queryUserList/").then((function(t){e.userItems=t.data})),this.$http.post("http://127.0.0.1:8000/manage/querySyncFolderList/").then((function(t){e.folderItems=t.data})),this.$http.post("http://127.0.0.1:8000/manage/queryPrivilegeList/").then((function(t){e.privilegeItems=t.data}))},resetModal:function(e){"user"==e?this.user.username=null:"folder"==e?this.folder.foldername=null:"privilege"==e&&(this.privilege.username=null,this.privilege.foldername=null,this.privilege.privilege=null)},userAdd:function(e){var t=this;e.preventDefault(),this.$refs.userAdd.checkValidity()&&this.$http.post("http://127.0.0.1:8000/manage/userAdd/",JSON.stringify(this.user)).then((function(e){"ok"==e.data?(t.$reflush(),t.$nextTick((function(){t.$bvModal.hide("modal-userAdd")}))):t.showWarnInfo(e.data)}))},folderAdd:function(e){var t=this;e.preventDefault(),this.$refs.folderAdd.checkValidity()&&this.$http.post("http://127.0.0.1:8000/manage/syncFolderAdd/",JSON.stringify(this.folder)).then((function(e){"ok"==e.data?(t.$reflush(),t.$nextTick((function(){t.$bvModal.hide("modal-folderAdd")}))):t.showWarnInfo(e.data)}))},privilegeAdd:function(e){var t=this;e.preventDefault(),this.$refs.privilegeAdd.checkValidity()&&this.$http.post("http://127.0.0.1:8000/manage/userPrivilegeAdd/",JSON.stringify(this.privilege)).then((function(e){"ok"==e.data?(t.$reflush(),t.$nextTick((function(){t.$bvModal.hide("modal-privilegeAdd")}))):t.showWarnInfo(e.data)}))},privilegeFormat:function(e){return 0==e.privilege?"读取、修改、新建、删除":1==e.privilege?"读取、修改、新建":2==e.privilege?"读取、修改":3==e.privilege?"读取":void 0},showWarnInfo:function(e){this.$bvToast.toast(e,{title:"错误信息",variant:"warning",solid:!0,autoHideDelay:3e3})}}},l=i,s=r("2877"),d=Object(s["a"])(l,o,a,!1,null,null,null),u=d.exports,f=r("bc3a"),c=r.n(f),p=r("a7fe"),h=r.n(p),m=r("5f5b"),b=r("b1e0");r("f9e3"),r("2dd8");n["default"].use(m["a"]),n["default"].use(b["a"]),n["default"].use(h.a,c.a),n["default"].config.productionTip=!1,c.a.defaults.headers.post["Content-Type"]="application/json;charset=UTF-8",new n["default"]({render:function(e){return e(u)}}).$mount("#app")}});
//# sourceMappingURL=app.20530ede.js.map